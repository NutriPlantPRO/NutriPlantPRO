# NutriPlant PRO - Netlify
# Publicar: carpeta raíz (.)
# La API de OpenAI se sirve como función serverless (la clave va en variables de entorno).

[build]
  publish = "."
  functions = "netlify/functions"
  # La clave de Google Maps en map.js es para el navegador (restringida por dominio en Google Cloud).
  # Netlify la marca como "likely secret" y falla el build; permitimos que el build continúe.
  [build.environment]
    SECRETS_SCAN_SMART_DETECTION_ENABLED = "false"

# Para que el frontend pueda llamar a /api/openai-assistant (igual que en local)
[[redirects]]
  from = "/api/openai-assistant"
  to = "/.netlify/functions/openai-assistant"
  status = 200
  force = true

# PayPal: Client ID y Plan ID desde variables de entorno (Live en producción)
[[redirects]]
  from = "/api/paypal-config"
  to = "/.netlify/functions/paypal-config"
  status = 200
  force = true
